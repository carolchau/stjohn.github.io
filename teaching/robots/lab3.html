<title>Lab 3, COSMOS 2002, UC Davis</title>

<body bgcolor="ffffff" link="003399" vlink="236b8e"> 


<h1>Laboratory Exercise 3</h1>
<h2>Robotics<br>
COSMOS 2002<br>
UC Davis</h2>

<hr>
<h3>Touch and Light Sensors</h3>


The first half of the lab focuses on the touch sensor.  We will
use the touch sensor as part of a bumper, and count the number of
obstacles that are hit.  After a pre-set limit has been reached,
the robot will stop and beep (that is, after too many accidents,
the robot can't drive any more!).  

<p>
The second half of today's lab is to try out the light seeking and
line following programs discussed in lecture.  Some of the constant
values will need to be adjusted, depending on how close the light
sensor is to the ground and whether you have natural or artificial
light.  We'll also write a program for counting the number of 
black lines crossed.

<p><b>Design requirements:</b>  This lab assumes that the
two motors are wired to output ports A and C.  Further, each 
motor is attached to a means of locomotion (legs, treads,
feet, etc.).  When using the light sensor, it is wired to 
sensor port 2.  The touch sensor is wired to sensor port 1. 
The second touch sensor will be wired to sensor port 3 for
the last program.  A flashlight is needed for setting the 
threshold limits of the light sensor.

<p><b>Programs used:</b>
Today's lab uses the light sensor, the touch sensors, 
the <a href="guidenqc/linebot1.nqc">linebot1.nqc</a>,
the <a href="seek.nqc">seek.nqc</a>, and
the <a href="guidenqc/bumpbot1.nqc">bumpbot1.nqc</a> from lecture.

<p><b>Lab Set-up:</b> This lab uses the practice tracks that
come with the robot documentation (a large white piece of 
paper with a black oval drawn on it).  There should also be
sets of 5 to 10 unequally spaced lines of black tape for 
testing the line-counting programs in the second half of the
lab.  The extra program at the end requires 4 different colors
of tape (preferrably: black, yellow, green, and red, but any
4 colors will do).  

<h3>The Touch Sensor and Bumpers</h3>

One natural use for the touch sensor is as part of a bumper.
Wire a bumper to input sensor 1 and try 
<a href="guidenqc/bumpbot1.nqc">bumpbot1.nqc</a>.  Copy 
this program to new file called <tt>limited_bumps.nqc</tt>.
Change the program in the following ways, and test between
steps:
<ol>
    <li> First, change <tt>limited_bumps.nqc</tt> to beep 
	everytime it hits an obstacle. 
    <li> Next, declare a variable called <tt>num_obstacles</tt>
	and set it to 0.  After the touch sensor is bumped,
	increase the variable by 1 (one command that will do
	this is: <tt>num_obstacles++;</tt>).
    <li> Change the <tt>while(true)</tt> loop to stop after
	5 obstacles are hit.
</ol>
Modify your program so that <b>only one</b> constant needs
to be changed to change the number of obstacles you are
allowed to hit before the program stops.

<h3>Using the light sensor</h3>

The second half of today's lab is to try out the light seeking and
line following programs discussed in lecture.  First, download
<a href="seek.nqc">seek.nqc</a>.  This program will seek out a
bright light.  If it doesn't find a light, it will beep, turn
for random distance, and go forward.  

<p>
If it's going forward and never beeping, check to see if the
sensor is connected to input port 2.  Next, increase the 
THRESHOLD constant in the program.  If the robot is beeping
and turning all the time, decrease the THRESHOLD constant.  
The values of the THRESHOLD constant will change depending on
how close the light sensor is to the ground, the ground 
surface, and the type of light.  To see the value of the light
sensor, toggle the <tt>VIEW</tt> button on the robot to sensor 
port 2.  

<p>
While you have the light sensor on the robot, also try the 
<a href="guidenqc/linebot1.nqc">linebot1.nqc</a> program.  
This program
will follow a black line on the ground.  Try it out on the 
test track that comes with the robot kit.  Adjust this program 
for the current light level (change the light threshold 
constants as above).

<h3>Counting Lines</h3>

Now that you have the idea of the light sensor, write a program
that will cross 5 black lines, turn around, and then stop.  Your
program should beep as it crosses each line.

<p>
First, write a program that will beep when it sees a black line.
You will probably have to adjust the THRESHOLD values several 
times, depending on the background lighting, before this works
well.  Next, incorporate this into a loop that stops after it
sees five lines.  You might find using a variable, <tt>lineCount</tt>,
helpful in keeping track of the lines you've seen so far.

<h3>Extra Programs</h3>

Write a program that beeps whenever it crosses black lines, 
goes slower when it crosses a yellow line ("caution zone"),
speeds up when it crosses a green line, and when it crosses
a red line, stops and ends the program.

<!--
<h3>If you finish early...</h3>

We will be playing basketball in the next lab. The goal is to 
a small object from the starting area, carry it to the basket,
and drop it in.  One approach to this is to use a dump truck,
like the one described in Chapter 9 of the textbook.   
-->
</body>
</html>


