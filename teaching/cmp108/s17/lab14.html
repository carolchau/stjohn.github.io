<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Lab 14, CMP 108/MAT 135/SOC 251, Lehman College, CUNY, Spring 2017</title>
    <link type="text/css" rel="stylesheet" href="../../../lehman.css" />
</head>
<body>

<div id="header">

<h2>Lab 14<br>
Programming for Data Analysis<br>
Lehman College, City University of New York<br>
Spring 2017<br><br>
</h2>
</div>


<div>

<p>
Today's lab focuses on using statistical models and hypothesis testing in the R programming language.  
</div>

<div>
<h3>Hypothesis Testing</h3>

<p>
Hypothesis testing is a central tool in data analysis, particularly in the social sciences.

<p>
If it's been a long time since you have seen hypothesis testing, Khan Academy has a very friendly introduction to <a href="https://www.khanacademy.org/math/statistics-probability/significance-tests-one-sample">significance tests of one sample</a>.   If you're in the lab, be kind to your neighbors, and watch with headphones (or turn off the sound and read the subtitles).  We're going to compute the Z-statistics and T-statistics, which are in the section on "Tests about a population mean."

<p>If the video is a bit long-winded, here's a more concise and formal description of 
<a href="https://www.r-bloggers.com/hypothesis-testing-on-normally-distributed-data-in-r/">hypothesis testing in normally distributed data</a>.




</div>

<div>

<h3>Distributions in R</h3>

<p>There are a large number of probability distributions available in R, but we'll focus on 4 of them that occur often.  Here is a reference to the commands for
<a href="http://www.cyclismo.org/tutorial/R/probability.html">distributions in R</a>.

<p>
We discussed the <a href="https://en.wikipedia.org/wiki/Normal_distribution">normal distribution</a> in class, shown here with different means (values for mu) and different variances (values for sigma^2):

<p>
<a href="https://en.wikipedia.org/wiki/Normal_distribution">
<img src="wikiNormal.png" width=400>
</a>


<p>
Two commonly used distributions that approach the normal distribution are:
<ul>
	<li> <a href="https://en.wikipedia.org/wiki/Student%27s_t-distribution">Student's t-distribution</a>:  commonly used, in place of the normal distribution for small samples.
	<br><img src="wikiStudentT.png" width=400>
	<br>
	As v (degrees of freedom) gets large, the distribution approaches the normal distribution.<br>
	<li> <a href="https://en.wikipedia.org/wiki/Chi-squared_distribution">Chi-Squared Distribution</a>:  used for chi-squared tests for goodness of fit.
	<br><img src="wikiChiSquared.png" width=400>
	<br>
	As k (degrees of freedom) gets large, the distribution approaches the normal distribution.
</ul>

<p>
Let's look at an example.  Try the first program in <a href="http://www.statmethods.net/advgraphs/probability.html">Probability Plots</a> that shows the comparison of the Student t-distribution (generated with the <tt>dt</tt>) for different degrees of freedom.  Change the program to 
<ul>
	<li> It currently compares the Student T-distribution with degrees of freedom of 1, 3, 8, 30 with the normal distribution.  Modify the program to compare 10 degrees of freedom. also (that is 1, 3, 8, 10, 30 with the normal distribution).
	<li> Your new curve should be purple.
	<li> Your labels and legend should include this additional curve.
</ul>
Submit your modified program as <a href="ps.html#set12">Program #59</a>.







</div>
<div>
<h3>Common Tests</h3>

<p>  The t-test is used to determine whether the mean of two groups are equal to each other.
Start by working through <a href="http://statistics.berkeley.edu/computing/r-t-tests">UCB's notes on t-tests in R</a>.  

<p>
 The chi-squared test is used, roughly, to test if one variable is affected or not by the presense of another. For example, in the built-in Motor Trends Cars data set, we can test if the displacement of the engines of the cars surveyed is independent of miles per gallon:
<pre>
chisq.test(mtcars$disp, mtcars$mpg)
</pre>
which results in:
<pre>

	Pearson's Chi-squared test

data:  mtcars$disp and mtcars$mpg
X-squared = 658.67, df = 624, p-value = 0.1629

Warning message:
In chisq.test(mtcars$disp, mtcars$mpg) :
  Chi-squared approximation may be incorrect
</pre>
Since the p-value (0.1629) is greater than the significance level (0.05), we do not reject the hypothesis that displacement is independent of miles per gallon.

<p>
Compute the chi-squared test on the hypothesis that miles per gallon is independent of the other variables:
<pre>
> str(mtcars)
'data.frame':	32 obs. of  11 variables:
 $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
 $ disp: num  160 160 108 258 360 ...
 $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec: num  16.5 17 18.6 19.4 17 ...
 $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb: num  4 4 1 1 2 1 4 2 2 4 ...
</pre>
Are any of the variables independent of mpg?  
Submit your program as <a href="ps.html#set12">Program #60</a>.


</div>



<div>
<h3>In-class Quiz</h3>

During lab, there is a quiz (end of semester survey).  The password to access the quiz will be given during lab.

</div>

<div>

<h3>What's Next?</h3>

<p>If you finish the lab early, now is a great time to get a head start on the programming problems due early next week.  There's instructors to help you and you already have Python up and running.  The <a href="ps.html">Programming Problem List</a> has problem descriptions, suggested reading, and due dates next to each problem.

</div>

<div>
<h3>Using R at Home</h3>

To duplicate the setting in the lab, you will need to download 
<ul>
	<li>R</li>
	<li><a href="https://www.xquartz.org">XQuartz</a> for Mac OSX</li>
</ul>


</div>


</body>
</html>

<!--
<div>
<h3>Putting This Altogether</h3>

<p>
A strength of R is the ability to carry out statistical techniques simply.   Here's the tools we'll use for hypothesis testing:
<ul>
	<li> <tt>rnorm()</tt>:  generates random samples of normal distributions.  Can specify the mean, the standard deviation, and the number of points sampled.
	
	<li> <tt>t.test()</tt>:  performs the T-test (described briefly above and in more detail below).
	
	<li> <tt>chisq.test()</tt>:  performs the Chi-Squared test (described above and in some detail below.
</ul>

Submit at Problem #60!  


<p>
Ideas for data sets:
<ul>
	<li> arrival times of subways or buses ( +- from scheduled?)
	<li> time-to-degree for students-- compute mean and then test if some subset is normally distributed, differs significantly from mean?  can you get student growth data?
	maybe look at asap programs
	<li> test scores for nyc schools can you get raw scores or average scores for schools?
 <li> sample something medical?  drug study
	<li> time of collisions  number of minutes after the hour would expect uniform, not normal, so, maybe use later?
</ul>
</div>
-->