<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Lab 10, CIS 166 & CMP 230,Introductory Programming, Lehman College, CUNY, Fall 2012</title>
    <link type="text/css" rel="stylesheet" href="../../../../lehman.css" />
</head>
<body>

<div id="header">

<h2>Lab 10<br>
CIS 166 & CMP 230: Introductory Programming <br>
Lehman College, City University of New York<br>
Fall 2012<br><br>
</h2>
</div>

<div>

<p><span class="announcement">Lab Dates:  Wednesday-Thursday, 29-30 November 2012</span></p>

<p>
Today's lab focuses on simulations from Chapter 10.

</div>


<div>
<h3>Random Walks and Stock Prices</h3>

Random walks (and their more sophisticated cousins, Monte Carlo methods)
are used to simulate diverse phenomena from predicting stock prices to 
predicting the weather.

<p>We will focus on simulating how the price of a stock changes over a
year.  We will start with the price of $1, and each day with probability
<tt>prob</tt> (entered by the user), the price will increase by a dollar.  If
it does not increase, it's price will go down by a dollar:
<pre>
	money = 1

    for day in range(365):
        if (random() < prob):
            money = money + 1
        else:
            money = money - 1
</pre>
We can make a graphic version of this by plotting the change in money 
made each day:
<pre>
def simulateYear(prob, win):

    #we'll start with $1 on day 0:
    oldPt = Point(0,1)
    money = 1
    

    for day in range(365):
        if (random() < prob):
            money = money + 1
        else:
            money = money - 1
        newPt = Point(day,money)
        Line(oldPt, newPt).draw(win)
        oldPt = newPt

    #Return the price of the stock on the last day:
    return(oldPt.getY())
</pre>

To run this program, we will also need a main:
<pre>
def main():
    w = GraphWin("Stock Price Simulation", 400,200)
    w.setCoords(-10,-100,365,100)
    endingValue = [0]*10
    

    p = eval(input("Please enter a number between 0 and 1:"))

    #draw axis:
    Line(Point(0,0),Point(365,0)).draw(w)
    Line(Point(0,-100),Point(0,100)).draw(w)

    for i in range(10):
        endingValue[i] = simulateYear(p,w)

    print("The ending values of our simulation were:", endingValue)

    w.getMouse()
    w.close()
</pre>
Put these all in one file (along with the necessary import statements
at the top of the file for <tt>math</tt>, <tt>graphics</tt>, and
<tt>random</tt>).  What happens when you run the program?  Try entering
values .5, .25, and .75 for the starting probabilities.

<p>
Lastly, the program prints out all the money earned at the end of 
each year of the simulation.  Modify the code so that it prints out
the maximum value and minimum value of the ending values (hint: use
the built-in python function or see discussion at the 
end of Chapter 7 text or slides).



<p>After completing your program, go to <tt>Assignments</tt> in Blackboard
and click on the link: <tt>Lab 1, Part 2</tt>.  Use the file upload interface
to upload your program.  Remember to click the <tt>Submit</tt> button before
closing the lab exercise.



<p> With the remaining time, start <a href="ps8.html">Problem Set 8</a>.

</p>
</div>